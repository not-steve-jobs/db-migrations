import { Column, Entity, Index, PrimaryGeneratedColumn } from 'typeorm';

@Index('malwarechecks_fileid_unique', ['fileId'], { unique: true })
@Index('malwareChecksTaskStatusIdx', ['taskStatus'], {})
@Index('malwareChecksCreatedIdx', ['created'], {})
@Entity('malwareChecks')
export class MalwareChecks {
  @PrimaryGeneratedColumn({ type: 'int', unsigned: true })
  public id: number;

  @Column('char', { length: 36 })
  public fileId: string;

  @Column('tinyint', {
    name: 'infected',
    nullable: true,
    width: 1,
    default: () => "'0'",
  })
  public infected: boolean | null;

  @Column('varchar', { nullable: true, length: 255 })
  public viruses: string | null;

  @Column('varchar', { length: 11 })
  public taskStatus: string;

  @Column('varchar', { nullable: true, length: 255 })
  public taskDescription: string | null;

  @Column('timestamp', { default: () => "'current_timestamp(3)'" })
  public created: Date;

  @Column('timestamp', { precision: 3, default: () => "'CURRENT_TIMESTAMP(3)'", onUpdate: 'CURRENT_TIMESTAMP(3)' })
  public updated: Date;
}
